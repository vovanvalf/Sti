<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Src.Utils.Email.EmailUtils">
<Abstract>1</Abstract>
<TimeCreated>63698,44068.956507</TimeCreated>

<Method name="AddToQueue">
<ClassMethod>1</ClassMethod>
<FormalSpec>subject:%String,message:%String,recipient:%String</FormalSpec>
<Implementation><![CDATA[
	set mail = ##class(Src.Utils.Email.Email).%New()
	
	set mail.CreationDate = $PIECE($HOROLOG, ",", 1)
	set mail.Subject = subject
	set mail.Message = message
	set mail.Recipient = recipient
	
	do mail.%Save()
]]></Implementation>
</Method>

<Method name="Send">
<ClassMethod>1</ClassMethod>
<FormalSpec>id:%Integer</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set st = $$$OK
	if (##class(Src.Utils.Email.Email).%ExistsId(id)) {
		set email = ##class(Src.Utils.Email.Email).%OpenId(id)
		
		$$$THROWONERROR(st, ##class(Src.Utils.Email.Sender).Send(email))
	}
	return st
]]></Implementation>
</Method>

<Method name="SendAll">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[	return ##class(Src.Utils.Email.Sender).SendAll()
]]></Implementation>
</Method>
</Class>
</Export>
