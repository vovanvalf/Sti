<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="Sti.Utils.Init.University">
<TimeCreated>63539,68721.15159</TimeCreated>

<Parameter name="PClassName">
<Default>University</Default>
</Parameter>

<Method name="Import">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	w !,"=== "_..#PClassName_" ==="
	
	set university = ##class(Sti.Data.University).%New()
	set university.FullName = ##class(Sti.Data.Localization.LText).Create("Институт Имени Сорокина")
	set university.ShortName = ##class(Sti.Data.Localization.LText).Create("ИИС")
	set university.Address = ##class(Sti.Data.Localization.LText).Create("Город М.")
	set university.Web = "www.ya.ru"
	
	w !, $CASE($$$ISERR(university.%Save()), 1: "Ошибка! Универ не создан!",:"Универ создан")
	
	set curator = ##class(Sti.Data.Employee).%New()
	set curator.LastName = ##class(Sti.Data.Localization.LText).Create("Петров", "Sti.Data.Localization.Translation;PersonLTextValue")
	set curator.FirstName = ##class(Sti.Data.Localization.LText).Create("Иван", "Sti.Data.Localization.Translation;PersonLTextValue")
	set curator.MiddleName = ##class(Sti.Data.Localization.LText).Create("Петрович", "Sti.Data.Localization.Translation;PersonLTextValue")
	set curator.Email = "petorv@mainuniversity.com"
	set curator.Phone = "000"
	
	set city = ##class(Sti.Data.Region).%New()
	set city = ##class(Sti.Data.Region).%OpenId("00077B9A-5B0C-49A0-9132-8C2D0D0112AF",3,.Status)
	set university.City=city
	
	set employees = ##class(%ArrayOfObjects).%New() 
	set employee = ##class(Sti.Data.Employee).%OpenId("1",3,.Status) 
	
	do employees.SetAt(employee,"BEABA77F-25FE-40B1-AF38-99A21742796B")
	set university.Contacts=employees
	
	
	set university.Curator = curator
	w !, $CASE($$$ISERR(curator.%Save()) || $$$ISERR(university.%Save()), 1: "Ошибка! Контакт  не создан!",:"Контакт создан")
	
	quit $$$OK
]]></Implementation>
</Method>
</Class>
</Export>
